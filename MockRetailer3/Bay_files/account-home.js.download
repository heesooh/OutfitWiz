!function(e){var t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=41)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.defaultOptions={onSuccess:()=>null,onFailure:()=>null,shouldDisplaySuccess:!0,shouldResetFormOnSuccess:!0,toggleBodyClassOnSubmit:!1,formWillRedirect:!1},this.resetForm=()=>{this.displayStatusMessage({clearMessages:!0}),this.form.reset();Array.from(document.querySelectorAll(".input-focus, span.invalid, label.is-invalid, .form-control.is-invalid")).forEach(e=>{e.classList.remove("input-focus","invalid","is-invalid")})},this.enableForm=async(e=!1)=>{this.options.toggleBodyClassOnSubmit&&this.bodyElement.classList.toggle("processing-form"),Object.assign(this.formMask||{},{disabled:e,style:{pointerEvents:e?"none":"",filter:e?"opacity(0.8)":""}})},this.displayStatusMessage=(e,t)=>{const n="message"in e?e.message:"";("message"in e?[e.statusContainer||(t?this.genericSuccessContainer:this.genericErrorContainer)]:[this.genericSuccessContainer,this.genericErrorContainer]).filter(Boolean).forEach(e=>e.innerHTML=n)},this.onSubmit=async e=>{e.preventDefault(),this.displayStatusMessage({clearMessages:!0}),this.disableForm().then(async()=>this.formMask instanceof HTMLFieldSetElement?fetch(this.form.action,{method:this.form.method,body:new URLSearchParams(this.formInputFields.map(e=>[e.name,e.value]))}).then(e=>e.json()):Promise.reject("Missing elements.")).then(e=>{if("status"in e){const t=e.status;return this.options.shouldResetFormOnSuccess&&this.resetForm(),this.options.shouldDisplaySuccess&&this.displayStatusMessage({message:t},!0),e}throw("errors"in e?e.errors:[{generic:"A generic error occurred, please reload the page and try again."}]).forEach(e=>{const[t]=Object.keys(e),n=e[t],s=this.form.querySelector(`[name=${t}]`),a=this.form.querySelector(`[name=${t}] + .valid`),o=this.form.querySelector(`[name=${t}] ~ .invalid-feedback`);s&&s.classList.add("is-invalid"),a&&(a.classList.add("invalid"),a.classList.remove("valid")),this.displayStatusMessage({message:n,statusContainer:o},!1)}),e}).then(e=>{this.options.formWillRedirect||this.enableForm(),this.options.onSuccess.call(this,e)}).catch(e=>{this.enableForm(),this.options.onFailure.call(this,e)})},this.bodyElement=document.getElementsByTagName("body")[0],this.form=e,this.formInputFields=Array.from(this.form.querySelectorAll("input, select")),this.formMask=this.form.querySelector("fieldset"),this.genericErrorContainer=this.form.querySelector(".alert-danger"),this.genericSuccessContainer=this.form.querySelector(".alert-success"),this.disableForm=this.enableForm.bind(null,!0),this.options={...this.defaultOptions,...t},this.form.addEventListener("submit",this.onSubmit)}}},function(e,t,n){"use strict";function s(){return"scrollBehavior"in document.documentElement.style}Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=function(e=0){return new Promise(t=>{setTimeout(t,e)})},t.somethingIsMissing=function(e="missing info"){console.warn(e)},t.scrollIntoView=function(e,t=!0){return new Promise(n=>{if(!e)return n();const{x:a,y:o}=e.getBoundingClientRect();window.scrollTo.apply(null,s()&&t?[{behavior:"smooth",left:a,top:o-200}]:[a,o-200]),setTimeout(n,s()?400:100)})},t.getCookie=function(e){const t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loyaltyEagleEyeServiceEnabled=function(){const e=document.getElementsByClassName("is-eagle-eye-service-enabled");if(e.length>0){return e[0].getAttribute("data-mode")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(4);t.default=class{constructor(e){this.dollarsEquivalent=null,this.userLocale="fr_CA"===document.querySelector("[data-loyalty-locale]").dataset.loyaltyLocale||"labaie.com"===window.location.hostname?"fr-CA":"en-CA",this.pointsAmount=e,this.pointsAmount&&this.pointsAmount.parentElement&&this.pointsAmount.parentElement.parentElement&&(this.dollarsEquivalent=this.pointsAmount.parentElement.parentElement.querySelector(".redeem-points-value")),this.render=this.render.bind(this)}init(){return this.pointsAmount instanceof HTMLInputElement&&(this.pointsAmount.addEventListener("change",this.render),this.pointsAmount.addEventListener("blur",this.render)),this.render(),this}update(e){this.pointsAmount.innerText=""+e,this.render()}render(){if(null!==this.dollarsEquivalent){const e=s(this.pointsAmount instanceof HTMLInputElement?Number(this.pointsAmount.value):this.pointsAmount.innerText),t=Math.floor(e/2)/100;this.dollarsEquivalent.innerHTML=Number.isNaN(t)||t<=0?"":t.toLocaleString(this.userLocale,{currency:"CAD",style:"currency"}).replace(/[\s](?=.*[\s])/g,".")}}}},function(e,t,n){"use strict";e.exports=function(e){var t="number"==typeof e?e:Number(e.replace(/\D/g,""));return Math.floor(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),n(21),n(22),n(23),n(24),n(25),n(26),n(27),n(28),n(29),n(30),n(31),n(32),n(33),n(34),n(35);const s=n(36),a=n(2),o=n(38),i=n(1),r=()=>{const e=document.querySelectorAll(".offer-card"),t=document.querySelectorAll(".offer-card .more-details-CTA"),n=document.querySelectorAll(".offer-card.active-now .cta-chip"),s=document.querySelectorAll(".offer-card.active-now"),a=document.querySelector(".offer-modal-content.active-now"),o=document.querySelector(".offer-modal-content.active-now .cta-chip"),i=(document.querySelector("#card-activated-block"),async e=>{const t=e.getAttribute("data-url"),n=await fetch(t),s=await n.json();return!!s.success&&s.success}),r=(e,t)=>{e.classList.remove("active-now"),e.classList.add("shop-now"),t.classList.remove("cta-chip"),t.classList.add("card-activated"),t.innerHTML=t.getAttribute("data-activated");e.getElementsByClassName("more-details-CTA")[0].innerHTML=t.getAttribute("data-viewall")};o&&o.addEventListener("click",async()=>{await i(o)&&r(a,o)}),n.forEach((e,t)=>{e.addEventListener("click",async()=>{await i(e)&&r(s[t],e)})}),t.forEach((t,n)=>{t.addEventListener("click",()=>{const s=t.getAttribute("data-campaign-id");if(!s)return;const a="#offer-more-details-modal-"+s,o=document.querySelector(a);if(!o)return;o.style.display="flex",o.innerHTML||(o.innerHTML=l(t,e[n],s));const i=()=>{o.style.display="none",window.onclick=()=>!0},r=document.querySelector(a+" .close");r&&r.addEventListener("click",i),window.onclick=e=>e.target==o&&i()})});const l=(e,t,n)=>"<div class='offer-modal-content "+e.getAttribute("data-span-status")+"'><span>"+t.querySelector(".offer-modal-title").innerHTML+"</span><span class='close' data-dismiss='modal' onclick='"+`javascript:$("#offer-more-details-modal-${n}").click()'>×</span><hr><div class='upper-container'><span>`+t.querySelector("#bannerLogo").innerHTML+"</span><span class= 'campaignTitle'>"+t.querySelector(".campaignTitle").innerHTML+"</span><p class='short-description'>"+t.querySelector(".short-description").innerHTML+"</p><p class='expiry-count-down'>"+t.querySelector(".expiry-count-down").innerHTML+"</p></div><div class='lower-container'>"+t.querySelector(".lower-container").innerHTML+"<div class='bg-expanable-circle'></div></div><hr><div class='dates'><p class='start-date'><span class='start-date-lable'>"+e.getAttribute("data-start-date-txt")+": </span>"+new Date(e.getAttribute("data-start")).toLocaleString("en-CA",{month:"short",day:"2-digit",weekday:"long",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})+"</p><p class='end-date'><span class='end-date-lable'>"+e.getAttribute("data-end-date-txt")+": </span>"+new Date(e.getAttribute("data-end")).toLocaleString("en-CA",{month:"short",day:"2-digit",weekday:"long",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})+"</p></div><hr><p class='offer-terms'><span class='offer-terms-lable'>"+e.getAttribute("data-offer-txt")+": </span> "+e.getAttribute("data-tnc")+" </p></div>"};t.initOffersPage=r,document.addEventListener("DOMContentLoaded",async()=>{const e=a.loyaltyEagleEyeServiceEnabled();if(r(),e?s.default().init():(()=>{const e=document.querySelector("#select-charity"),t=Array.from(document.querySelectorAll(".donate-points-form__charity-details")),n=e=>{const n=t[e];t.forEach(e=>{!1===e.classList.value.includes("d-none")&&e.classList.add("d-none")}),n.classList.remove("d-none");const s=n.querySelector("#charity-name");if("Hudson’s Bay Foundation"!==s.innerText&&"Fondation La Baie d’Hudson"!==s.innerText){n.querySelector("#donate-points-form__charity-details-charity-link").classList.add("d-none")}};e.addEventListener("change",e=>{const t=e.target.selectedIndex;n(t)}),n(0),s.default().init()})(),document.querySelectorAll(".open-close-btn").forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("closed")})}),!e){await i.sleep(1500);try{o.default().play()}catch(e){i.somethingIsMissing(e)}}})},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/air-miles_en.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/air-miles_fr.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/petro-points_en.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/petro-points_fr.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/Avion-Rewards_blk_PE.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/Avion-Rewards_blk_PF.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/offers-bay-logo.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/offers-zellers-logo.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/offer-bay-french-logo.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/offer-expiry-clock.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/black-health-alliance.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/camh.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/foodbankscanada.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/foundation.png"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/hudsons-bay-foundation-en.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/hudsons-bay-foundation-fr.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/kidshelpphone.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/r-logo.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/rewards-icon.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/rewards_BASE_en_CA.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/rewards_BASE_fr_CA.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/rewards_PLUS_en_CA.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/rewards_PLUS_fr_CA.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/rewards_VIP_en_CA.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/rewards_VIP_fr_CA.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/donate.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/exchange.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/gift.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/check-circle.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./default/images/close-thin.svg"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(37),a=n(1),o=n(0),i=n(3),r=n(2);let l;function c(e){const t=window.pointHistoryData||[],n=window.pointHistoryLabels;let s=!0;r.loyaltyEagleEyeServiceEnabled()?t.length>0&&(s=!1):t.forEach((e,t)=>{"0"!==e.points&&(s=!1)});const a=document.getElementById("hasPointsHeader"),o=document.getElementById("noHasPointsHeader");if(s&&(a.classList.add("d-none"),o.classList.remove("d-none")),r.loyaltyEagleEyeServiceEnabled()&&(t.length<10||0==t.length)){var i=document.querySelector("#jsMorePtHistBtn");i&&i.classList.add("d-none")}let l="";r.loyaltyEagleEyeServiceEnabled()&&(l+=a.outerHTML,l+=o.outerHTML);(e=>{e.forEach((e,t)=>{if(l+=`\n        <li class="point-history-li">\n          <span class="event-date">\n            ${function(e){const t=new Date(e),n=t.getDate();return t.getMonth()+1+"/"+n+"/"+t.getFullYear().toString().slice(-2)}(e.created_at)}\n          </span>\n\n          <span class="event-description">\n            ${"REFUND"===e.event_type?e.event_type:e.display_detail}\n          </span>\n\n        `,r.loyaltyEagleEyeServiceEnabled()?l+=`\n            <p class="event-points">${"BURN"===e.display_detail||"REFUND"===e.event_type?e.points_earned>0?"-"+e.points_earned:0:e.points_earned}</p>`:l+=`<span class="event-points">${e.points}</span>`,l+=`\n\n          <a class="open-close-btn closed" data-toggle="collapse" href="#transaction${t}">\n            <span class="svg-svg-59-plus-thin-dims svg-svg-59-plus-thin plus"></span>\n            <span class="svg-svg-49-minus-thin-dims svg-svg-49-minus-thin minus"></span>\n          </a>\n        </li>\n        <li class="point-history-details collapse" id="transaction${t}">`,r.loyaltyEagleEyeServiceEnabled()&&"Credit outside of Hudson’s Bay"===e.display_detail){if(l+=`\n          <div class="point-history-details__content">\n          <div class="point-history-details__detail">\n          <span class="point-history-details__detail">${n.transactionnum}</span>\n          <span class="point-history-details__detail">${e.reference_number?e.reference_number:"-"}</span>\n          </div>\n        </div>\n          `,e){const t=e.points_earned_base,s=e.points_earned_bonus;if(t&&"REFUND"!==e.event_type&&(l+=`\n                <div class="point-history-details__earned-content">\n                  <div class="point-history-details__earned-detail">\n                    <span class="point-history-details__left-space"></span>\n                    <span class="point-history-details__earned-label">${n.base}</span>\n                    <span class="point-history-details__earned-amount">${t}</span>\n                    <span class="point-history-details__right-space"></span>\n                  </div>\n                </div>`),s&&s.length>0)for(let e=0;e<s.length;e++){const t=s[e];t&&t.points_earned_promo_desc&&t.points_earned_promo&&(l+=`\n                    <div class="point-history-details__earned-content">\n                      <div class="point-history-details__earned-detail">\n                        <span class="point-history-details__left-space"></span>\n                        <span class="point-history-details__earned-label">${t.points_earned_promo_desc}</span>\n                        <span class="point-history-details__earned-amount">${t.points_earned_promo}</span>\n                        <span class="point-history-details__right-space"></span>\n                      </div>\n                    </div>`)}}}else if(!r.loyaltyEagleEyeServiceEnabled()||"EARN"!==e.display_detail&&"CREDIT"!==e.display_detail){if(l+=`\n          <div class="point-history-details__content">\n          <div class="point-history-details__detail">\n            <span class="point-history-details__detail">${n.transactionnum+"&nbsp;"}</span>\n            <span class="point-history-details__detail">${e.reference_number?e.reference_number:"-"}</span>\n          </div>\n        </div>\n          `,e){const t=e.points_earned_base,s=e.points_earned_bonus;if(t&&"REFUND"!==e.event_type&&(l+=`\n                <div class="point-history-details__earned-content">\n                  <div class="point-history-details__earned-detail">\n                    <span class="point-history-details__left-space"></span>\n                    <span class="point-history-details__earned-label">${n.base}</span>\n                    <span class="point-history-details__earned-amount">${t}</span>\n                    <span class="point-history-details__right-space"></span>\n                  </div>\n                </div>`),s&&s.length>0)for(let e=0;e<s.length;e++){const t=s[e];t&&t.points_earned_promo_desc&&t.points_earned_promo&&(l+=`\n                    <div class="point-history-details__earned-content">\n                      <div class="point-history-details__earned-detail">\n                        <span class="point-history-details__left-space"></span>\n                        <span class="point-history-details__earned-label">${t.points_earned_promo_desc}</span>\n                        <span class="point-history-details__earned-amount">${t.points_earned_promo}</span>\n                        <span class="point-history-details__right-space"></span>\n                      </div>\n                    </div>`)}}}else if(l+=`\n\n        <div class="point-history-details__earned-content">\n          <div class="point-history-details__earned-detail">\n            <span class="point-history-details__left-space"></span>\n            <span class="point-history-details__earned-label">${n.transactionnum}</span>\n            <span class="point-history-details__earned-amount">${e.reference_number?e.reference_number:"-"}</span>\n            <span class="point-history-details__right-space"></span>\n          </div>\n        </div>\n          `,e){const t=e.points_earned_base,s=e.points_earned_bonus;if(t&&(l+=`\n                <div class="point-history-details__earned-content">\n                  <div class="point-history-details__earned-detail">\n                    <span class="point-history-details__left-space"></span>\n                    <span class="point-history-details__earned-label">${n.base}</span>\n                    <span class="point-history-details__earned-amount">${t}</span>\n                    <span class="point-history-details__right-space"></span>\n                  </div>\n                </div>`),s&&s.length>0)for(let e=0;e<s.length;e++){const t=s[e];t&&t.points_earned_promo_desc&&t.points_earned_promo&&(l+=`\n                    <div class="point-history-details__earned-content">\n                      <div class="point-history-details__earned-detail">\n                        <span class="point-history-details__left-space"></span>\n                        <span class="point-history-details__earned-label">${t.points_earned_promo_desc}</span>\n                        <span class="point-history-details__earned-amount">${t.points_earned_promo}</span>\n                        <span class="point-history-details__right-space"></span>\n                      </div>\n                    </div>`)}}l+="</li>"})})(t),r.loyaltyEagleEyeServiceEnabled()?e.innerHTML=l:(e.innerHTML="",e.innerHTML+=l)}document.addEventListener("DOMContentLoaded",()=>{const e=Array.from(document.querySelectorAll(".redeem-points")).map(e=>new i.default(e).init());l=t=>e.forEach(e=>e.update(t))});let d=1;function u(){const e=document.querySelector("#points-history > div > ul"),t=document.querySelector(".account-rewards-page__point-history> div > ul"),n=this.dataset.url,s=document.querySelector("#jsMorePtHistBtn");(async function(){d++;const e=await fetch(n,{method:"POST",body:d.toString()});return await e.json()})().then((function(n){n.success&&n.events.length>0?(window.pointHistoryData=window.pointHistoryData.concat(n.events),r.loyaltyEagleEyeServiceEnabled()?c(t):c(e),r.loyaltyEagleEyeServiceEnabled&&n.events.length<10&&s.classList.add("d-none")):s.classList.add("d-none")}))}function p({status:e,LoyaltyProfile:t}){const n=document.getElementById("gift-points__success-screen");n.firstElementChild.innerHTML=e;document.getElementById("gift-points__section").classList.add("d-none"),n.classList.remove("d-none"),l(t.pointsBalance)}function f({LoyaltyProfile:e}){l(e.pointsBalance)}function m(e){e.isLocked&&this.disableForm()}t.default=function(){const e=".account-rewards-overlay--open",t=document.querySelector(".account-rewards-page__program-info");t&&t.classList.add("d-none");const n=Array.from(document.querySelectorAll(".account-rewards-page__content > *:not(.account-rewards-overlay)")),i=document.querySelector(".account-rewards-overlay");let l;!function(e){e.rewardsgifting="gift-points",e.rewardscharity="donate-points",e.rewardspartners="partnerships"}(l||(l={}));const d=()=>{const e=window.location.pathname.lastIndexOf("/"),t=window.location.pathname.substr(e+1).toLowerCase();return l[t]};let y=d();if(i&&y){n.forEach(e=>e.classList.add(".d-none".replace(".",""))),i.style.position="relative",i.classList.add(e.replace(".",""));const t=document.querySelector("#"+y);t&&t.classList.remove(".d-none".replace(".",""))}var h;const g=(r.loyaltyEagleEyeServiceEnabled()?[]:[["donatePointsForm",{onSuccess:f,shouldResetFormOnSuccess:!1,onFailure:m}],["giftPointsForm",{...(h=p,{onSuccess:h,shouldDisplaySuccess:!1,shouldResetFormOnSuccess:!1}),onFailure:m}]]).map(([e,t])=>new o.default(document.getElementById(e),t)),_=Array.from(document.querySelectorAll(".account-rewards__overlay-trigger")),v=Array.from(document.querySelectorAll(".account-rewards-overlay__content")),b=document.querySelector(".account-rewards-page__overview"),w=document.querySelector(".account-rewards-overlay__x"),E=document.getElementById("jsMorePtHistBtn");let S,L=!1;if(v.length<=0||n.length<=0||!i||!w||_.length<=0||!E)return{init:a.somethingIsMissing};const A=async function({key:e}){["Escape","Esc"].includes(e)&&await q()},M=async function(t){if(!1===L&&b&&v.length>0&&i){g.forEach(e=>{e.resetForm()}),L=!0,document.addEventListener("keydown",A);document.querySelector("#"+t)&&(v.forEach(e=>{e.id===t?e.classList.remove(".d-none".replace(".","")):e.classList.add(".d-none".replace(".",""))}),await a.scrollIntoView(b),await new Promise(async t=>{i.classList.add(e.replace(".","")),await a.sleep(500),t()}),n.forEach(e=>e.classList.add(".d-none".replace(".",""))),i.style.position="relative"),L=!1}},q=async function(){!1===L&&i&&(y?(y=!1,window.history.pushState({slug:"loyaltyrewards"},"","loyaltyrewards")):null===window.history.state?window.history.forward():d()&&window.history.back(),L=!0,document.removeEventListener("keydown",A),i.style.position="absolute",n.forEach(e=>e.classList.remove(".d-none".replace(".",""))),await new Promise(t=>{i.classList.remove(e.replace(".","")),i.addEventListener("transitionend",t,{once:!0})}),await a.scrollIntoView(S,!1),L=!1)},T=function(){const e=document.querySelector(".account-rewards-page__point-history> div > ul"),t=document.querySelector("#points-history > div > ul");return{init(){c(e),c(t)}}}();return{init(){async function e(e){const t=e.currentTarget;if(!t.href){e.preventDefault(),S=t;const n=t.getAttribute("data-overlay-template-id"),a=new CustomEvent("pageUpdate",{detail:{page:{name:""+n}}}),o=s.default(l,n)+window.location.search;window.history.pushState({slug:o},"",o),window.dispatchEvent(a),await M(n)}}T.init(),window.history.scrollRestoration="manual",window.onpopstate=()=>{const e=d();e?M(e):q()},_.forEach(t=>{t.onclick=e}),w.onclick=q,E.onclick=u}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n in e)if(e[n]===t)return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{play:function(){const[e,t,n,s,a]=[document.querySelector("#progressBar"),document.querySelector("#rewardsStatus"),document.querySelector(".tier--start.step"),document.querySelector(".tier--middle.step"),document.querySelector(".tier--end.step")];if(e instanceof HTMLElement&&t instanceof HTMLElement&&n instanceof HTMLElement&&s instanceof HTMLElement&&a instanceof HTMLElement){const o=Number(t.getAttribute("data-dollarsToNextTier")||-1),i=t.getAttribute("data-usefulTierName"),r=function(){const e={threshold:400},t={threshold:1200};let n;return n="VIP"===i?1:"PLUS"===i?(t.threshold-o)/t.threshold:(e.threshold-o)/t.threshold,100*n}();return new Promise((function(t){const l=r,c=l/100*1;if(i&&-1!==o&&e instanceof HTMLElement&&n instanceof HTMLElement&&s instanceof HTMLElement&&a instanceof HTMLElement)return e.style.transitionDuration=c+"s",e.style.width=l+"%",e.style.opacity="1",l>=1&&(n.style.backgroundColor="black",n.classList.add("change")),l>=33&&(s.style.background="black",s.classList.add("change")),l>=100&&(a.style.background="black",a.classList.add("change")),e.addEventListener("transitionend",t,{once:!0})}))}return Promise.resolve(null)}}}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(3),a=n(5);document.addEventListener("DOMContentLoaded",()=>{(()=>{const e=document.querySelector(".greeting");if(!e)return;const t=(new Date).getHours();let n;n=t<12?e.dataset.morningGreeting:t<18?e.dataset.afternoonGreeting:e.dataset.eveningGreeting,e.innerText=n})();const e=e=>{Array.from(document.querySelectorAll(".redeem-points")).map(e=>new s.default(e).init()).forEach(t=>t.update(e))},t=document.querySelector("[data-points-available]"),n=Number(t?t.dataset.pointsAvailable:0);e(n),document.querySelectorAll(".rewards-summary__auto-link").forEach(t=>{t&&(t.onclick=t=>{t.preventDefault();const{href:n}=t.target;n&&fetch(n,{method:"POST"}).then(e=>e.json()).then(t=>{if(t.message){const n=document.querySelector(".rewards-summary.reward-content");if(n&&(n.outerHTML=t.message,t.success)){const n=document.querySelector(".user-links");n&&(n.innerHTML=t.userLinksHtml);const s=document.querySelector(".welcome-account-header.text-center");if(s){const e=document.createElement("div");e.innerHTML=t.messageHeader,s.after(e)}e(t.pointsBalance)}}})})}),document.querySelectorAll(".rewards-summary__do-not-link").forEach(e=>{e&&(e.onclick=e=>{e.preventDefault();const{href:t}=e.target;t&&fetch(t,{method:"POST"}).then(e=>e.json()).then(e=>{if(e.message){const t=document.querySelector(".rewards-summary.reward-content");t&&(t.outerHTML=e.message)}})})}),a.initOffersPage()}),window.onload=()=>{const e=document.querySelector(".banner-contents"),t=document.querySelector(".neo-mastercard-banner");e&&t&&(t.style.display="block",e.style.opacity="1")}}]);